DROP TABLE ACCOUNTS;
DROP SEQUENCE SEQ_ACCOUNTS;

CREATE TABLE ACCOUNTS(
    ID INTEGER NOT NULL PRIMARY KEY,
    COMPLETE_NAME VARCHAR2(500) NOT NULL,
    EMAIL VARCHAR2(500) NOT NULL UNIQUE,
    PASSWORD VARCHAR2(64) NOT NULL,
    ROLE NUMBER(1) NOT NULL,
    TOKEN VARCHAR2(32) NOT NULL UNIQUE,
    CREATED_AT DATE DEFAULT SYSDATE
);
-- ADICIONAR TRATAMENTO DE ERRO PARA TOKEN OU EMAIL JÁ ADICIONADOS
CREATE SEQUENCE SEQ_ACCOUNTS START WITH 1 INCREMENT BY 1;

INSERT INTO ACCOUNTS (ID, COMPLETE_NAME, EMAIL, PASSWORD, ROLE, TOKEN)
VALUES( 
    SEQ_ACCOUNTS.NEXTVAL, 
    'Enzo Garofalo', 
    'enzo.g@puc', 
    '12312', 
    1, 
    DBMS_RANDOM.STRING('X', 32)
);

INSERT INTO ACCOUNTS (ID, COMPLETE_NAME, EMAIL, PASSWORD, ROLE, TOKEN)
VALUES( 
    SEQ_ACCOUNTS.NEXTVAL, 
    'Rogério Medina', 
    'rogerio@puc', 
    '123123', 
    1, 
    DBMS_RANDOM.STRING('X', 32)
);

COMMIT;

SELECT * FROM ACCOUNTS;
